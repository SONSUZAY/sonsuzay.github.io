<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Uzay SavunmasÄ± - Serkan CoÅŸan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAAdklEQVRogcYyQRCAMAwD8w/8SAU60IE+8g88EAIG3E1m93iH3ZtU3a76iY+4Y48/G2KPP/7YY48/9thjjz/22GOPP/bYY48/9thjjz/22GOPP/bYY48/9thjjz/22GOPP/bYY48/9thjjz/22GOPP/bYEwE+sR9X9YJ7eQAAAABJRU5ErkJggg==">

    <style>
        body {
            background-color: #000;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            touch-action: none;
            color: white;
        }

        #oyunAlani {
            border: 2px solid #333;
            background: radial-gradient(circle at bottom, #1a1a1a, #000);
            box-shadow: 0 0 20px rgba(0,255,0,0.2);
            border-radius: 5px;
            display: block;
        }

        #bilgi {
            color: #0f0;
            font-size: 18px;
            margin-bottom: 10px;
            width: 320px;
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            text-shadow: 0 0 5px #0f0;
            z-index: 10;
        }

        #baslaEkrani {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.85);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }

        button {
            background-color: #0f0;
            color: black;
            border: none;
            padding: 15px 40px;
            font-size: 24px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 0 15px #0f0;
            font-family: 'Courier New', monospace;
        }
        button:active { transform: scale(0.95); }

        #imza {
            margin-top: 10px;
            color: #666;
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
    </style>
</head>
<body>

    <div id="bilgi">
        <span>PUAN: <span id="skor">0</span></span>
        <span>DÃœÅžMAN: <span id="kalan">0</span></span>
    </div>

    <div style="position: relative;">
        <canvas id="oyunAlani" width="320" height="480"></canvas>
        
        <div id="baslaEkrani">
            <h1 style="color:#0f0; text-shadow:0 0 10px #0f0; text-align:center;">UZAY SAVUNMASI</h1>
            <p style="text-align:center; max-width: 300px; font-size: 14px; margin-bottom: 20px;">
                ParmaÄŸÄ±nÄ± kaydÄ±rarak roketi yÃ¶net.<br>
                AteÅŸ etmek iÃ§in ekrana basÄ±lÄ± tut.
            </p>
            <button onclick="oyunuBaslat()">BAÅžLA</button>
            <div style="margin-top: 30px; color: #888; font-size: 12px;">GeliÅŸtirici: Serkan CoÅŸan</div>
        </div>
    </div>

    <div id="imza">GeliÅŸtirici: Serkan CoÅŸan</div>

    <script>
        const canvas = document.getElementById('oyunAlani');
        const ctx = canvas.getContext('2d');
        const skorEl = document.getElementById('skor');
        const kalanEl = document.getElementById('kalan');
        const baslaEkrani = document.getElementById('baslaEkrani');

        let oyunAktif = false;
        let skor = 0;
        let animasyonId;

        // Roket
        let roket = { x: 140, y: 420, w: 40, h: 40, hiz: 0 };
        
        // Mermiler ve DÃ¼ÅŸmanlar
        let mermiler = [];
        let dusmanlar = [];
        let mermiSayaci = 0; // Otomatik ateÅŸ hÄ±zÄ± kontrolÃ¼
        let atesEdiliyor = false;

        // DÃ¼ÅŸman AyarlarÄ±
        const sutunlar = 6;
        const satirlar = 4;
        let dusmanYon = 1; // 1: SaÄŸ, -1: Sol
        let dusmanHizX = 1;

        // KONTROLLER
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            atesEdiliyor = true;
            guncelleRoketKonum(e.touches[0].clientX);
        }, {passive: false});

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            guncelleRoketKonum(e.touches[0].clientX);
        }, {passive: false});

        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            atesEdiliyor = false;
        });

        // Mouse desteÄŸi (Test iÃ§in)
        canvas.addEventListener('mousedown', () => atesEdiliyor = true);
        canvas.addEventListener('mouseup', () => atesEdiliyor = false);
        canvas.addEventListener('mousemove', (e) => {
            if(oyunAktif) guncelleRoketKonum(e.clientX);
        });

        function guncelleRoketKonum(clientX) {
            const rect = canvas.getBoundingClientRect();
            let relativeX = clientX - rect.left;
            if(relativeX > 0 && relativeX < canvas.width) {
                roket.x = relativeX - roket.w / 2;
            }
        }

        function oyunuBaslat() {
            baslaEkrani.style.display = 'none';
            oyunAktif = true;
            skor = 0;
            skorEl.innerText = '0';
            mermiler = [];
            dusmanlar = [];
            dusmanHizX = 1;
            
            // DÃ¼ÅŸmanlarÄ± OluÅŸtur
            for(let c=0; c<sutunlar; c++) {
                for(let r=0; r<satirlar; r++) {
                    dusmanlar.push({
                        x: 20 + (c * 45),
                        y: 30 + (r * 40),
                        w: 30,
                        h: 30,
                        canli: true
                    });
                }
            }
            kalanEl.innerText = dusmanlar.length;
            
            if(animasyonId) cancelAnimationFrame(animasyonId);
            dongu();
        }

        function dongu() {
            if(!oyunAktif) return;

            // EkranÄ± Temizle
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // YÄ±ldÄ±z Efekti (Basit noktalar)
            ctx.fillStyle = 'white';
            for(let i=0; i<10; i++) {
                ctx.fillRect(Math.random()*canvas.width, Math.random()*canvas.height, 2, 2);
            }

            // 1. ROKETÄ° Ã‡Ä°Z
            ctx.font = "30px Arial";
            ctx.fillText("ðŸš€", roket.x, roket.y + 30);

            // 2. ATEÅž SÄ°STEMÄ° (Otomatik)
            if(atesEdiliyor) {
                mermiSayaci++;
                if(mermiSayaci % 10 === 0) { // Her 10 karede bir ateÅŸ et
                    mermiler.push({ x: roket.x + 18, y: roket.y, w: 4, h: 10 });
                }
            }

            // 3. MERMÄ°LERÄ° YÃ–NET
            ctx.fillStyle = '#ffeb3b';
            for(let i=0; i<mermiler.length; i++) {
                let m = mermiler[i];
                m.y -= 8; // Mermi hÄ±zÄ±
                ctx.fillRect(m.x, m.y, m.w, m.h);
                
                if(m.y < 0) {
                    mermiler.splice(i, 1);
                    i--;
                }
            }

            // 4. DÃœÅžMANLARI YÃ–NET
            let kenaraCarpti = false;
            let canliDusmanSayisi = 0;

            // Ã–nce hareket ve Ã§izim
            for(let i=0; i<dusmanlar.length; i++) {
                let d = dusmanlar[i];
                if(d.canli) {
                    canliDusmanSayisi++;
                    // Hareket
                    d.x += dusmanHizX * dusmanYon;
                    
                    // Ã‡izim
                    ctx.font = "25px Arial";
                    ctx.fillText("ðŸ‘¾", d.x, d.y + 25);

                    // Kenar kontrolÃ¼ iÃ§in iÅŸaretle
                    if(d.x > canvas.width - 35 || d.x < 5) {
                        kenaraCarpti = true;
                    }

                    // Oyun Bitti mi? (Yere deÄŸdiler mi?)
                    if(d.y > roket.y - 20) {
                        oyunBitti("DÃœNYA Ä°ÅžGAL EDÄ°LDÄ°!");
                        return;
                    }

                    // Vurulma KontrolÃ¼
                    for(let j=0; j<mermiler.length; j++) {
                        let m = mermiler[j];
                        if(m.x > d.x && m.x < d.x + d.w && m.y > d.y && m.y < d.y + d.h) {
                            d.canli = false;
                            mermiler.splice(j, 1);
                            skor += 10;
                            skorEl.innerText = skor;
                            // HÄ±zlandÄ±r
                            if(dusmanHizX < 5) dusmanHizX += 0.1;
                            break;
                        }
                    }
                }
            }
            kalanEl.innerText = canliDusmanSayisi;

            if(canliDusmanSayisi === 0) {
                oyunBitti("TEBRÄ°KLER KOMUTAN!");
                return;
            }

            // EÄŸer gruptan biri kenara Ã§arptÄ±ysa herkesi aÅŸaÄŸÄ± indir ve yÃ¶n Ã§evir
            if(kenaraCarpti) {
                dusmanYon *= -1;
                for(let i=0; i<dusmanlar.length; i++) {
                    dusmanlar[i].y += 15; // Bir satÄ±r aÅŸaÄŸÄ± in
                }
            }

            animasyonId = requestAnimationFrame(dongu);
        }

        function oyunBitti(mesaj) {
            oyunAktif = false;
            baslaEkrani.style.display = 'flex';
            baslaEkrani.innerHTML = `
                <h1 style="color:${mesaj.includes('TEBRÄ°KLER') ? '#0f0' : 'red'}; text-align:center;">${mesaj}</h1>
                <h2 style="color:white;">SKOR: ${skor}</h2>
                <button onclick="location.reload()" style="margin-top:20px;">TEKRAR OYNA</button>
                <div style="margin-top:30px; color:#888;">GeliÅŸtirici: Serkan CoÅŸan</div>
            `;
        }
    </script>
</body>
</html>
