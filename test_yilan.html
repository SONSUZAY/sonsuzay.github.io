<script>
    // --- ğŸ”Š SÄ°HÄ°RLÄ° SES SÄ°STEMÄ° (AudioContext) ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function sesCal(frekans, tip, sure, sesSeviyesi = 0.1) {
        if (!oyunAktif) return;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = tip; // 'square', 'sine', 'triangle', 'sawtooth'
        osc.frequency.setValueAtTime(frekans, audioCtx.currentTime);
        gain.gain.setValueAtTime(sesSeviyesi, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + sure);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + sure);
    }

    // --- Ã–ZEL AKSÄ°YON SESLERÄ° ---
    const sesler = {
        normalElma: () => sesCal(600, 'sine', 0.1),       // Ä°nce 'bip'
        altinElma: () => sesCal(880, 'triangle', 0.2),   // Parlak 'ding'
        hizYemi: () => {                                 // HÄ±zlanma efekti
            sesCal(400, 'square', 0.1);
            setTimeout(() => sesCal(600, 'square', 0.1), 50);
        },
        zehirYemi: () => sesCal(150, 'sawtooth', 0.3),   // KalÄ±n 'dÃ¼Ã¼uv'
        canKaybi: () => sesCal(200, 'square', 0.4),      // UyarÄ± sesi
        gameOver: () => {                                // Booom efekti
            sesCal(100, 'sawtooth', 0.6, 0.2);
            sesCal(50, 'sawtooth', 0.8, 0.2);
        }
    };

    // --- OYUN MANTIÄINA SESLERÄ° ENTEGRE ETME ---

    // 1. Oyunu BaÅŸlatÄ±rken (Ses Sistemini UyandÄ±r)
    function oyunuBaslat() {
        audioCtx.resume(); // TarayÄ±cÄ± izni iÃ§in kritik!
        bilgiMenusu.style.display = 'none'; 
        document.getElementById('oyunAlani').style.display = 'block'; 
        bilgiPaneli.style.display = 'flex'; 
        kontrolPaneli.style.display = 'grid'; 
        sesler.normalElma(); // BaÅŸlangÄ±Ã§ iÅŸareti
        oyunuSifirlaVeBaslat(); 
    }

    // 2. Yem Yeme AnlarÄ± (oyunuCiz fonksiyonu iÃ§ine eklendi)
    // Ã–rnek: Normal elma yendiÄŸinde
    if(basX === elmaX && basY === elmaY) {
        sesler.normalElma(); // ğŸ”Š SES BURADA
        // ... (diÄŸer kodlar)
    }

    // AltÄ±n elma yendiÄŸinde
    if(basX === altinElmaX && basY === altinElmaY) {
        sesler.altinElma(); // ğŸ”Š SES BURADA
        // ... (diÄŸer kodlar)
    }

    // Can KaybÄ± AnÄ±nda (oyunuCiz iÃ§inde Game Over kontrolÃ¼)
    if (secilenHayatModu === 'direncli' && canSayisi > 1) {
        sesler.canKaybi(); // ğŸ”Š SES BURADA
        // ... (diÄŸer kodlar)
    }

    // Oyun Tamamen BittiÄŸinde
    function oyunBitti() {
        sesler.gameOver(); // ğŸ”Š SES BURADA
        // ... (diÄŸer kodlar)
    }

    // HÄ±z Yemi YendiÄŸinde
    if (basX === hizX && basY === hizY) {
        sesler.hizYemi(); // ğŸ”Š SES BURADA
        // ... (diÄŸer kodlar)
    }

    // Zehir Yemi YendiÄŸinde
    if (basX === zehirX && basY === zehirY) {
        sesler.zehirYemi(); // ğŸ”Š SES BURADA
        // ... (diÄŸer kodlar)
    }
</script>
