<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>YÄ±ldÄ±zAY - SONSUZ.AY</title>
    <style>
        :root { --app-height: 100vh; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        html, body {
            height: var(--app-height);
            margin: 0; padding: 0;
            background-color: #000;
            color: #fff;
            font-family: 'Segoe UI', system-ui, sans-serif;
            overflow: hidden;
            position: fixed; /* Klavye aÃ§Ä±ldÄ±ÄŸÄ±nda kaymayÄ± Ã¶nler */
            width: 100%;
        }

        .app-wrapper {
            display: flex;
            flex-direction: column;
            height: var(--app-height);
            width: 100%;
        }

        .header {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
            color: #00e5ff;
            border-bottom: 1px solid #1a1a1a;
            flex-shrink: 0;
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.3);
        }

        #chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 30px; /* Mesaj mesafesi gÃ¶rÃ¼ntÃ¼lerdeki gibi ferah */
            background: radial-gradient(circle at top, #0d0d0d 0%, #000 100%);
        }

        .message {
            line-height: 1.5;
            max-width: 85%;
            padding: 14px 18px;
            border-radius: 20px;
            font-size: 16px;
            word-wrap: break-word;
            position: relative;
        }

        .bot-msg {
            align-self: flex-start;
            background: rgba(0, 229, 255, 0.08);
            border: 1px solid rgba(0, 229, 255, 0.2);
            border-left: 4px solid #00e5ff;
        }

        .user-msg {
            align-self: flex-end;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-right: 4px solid #fff;
        }

        .name-tag { font-size: 11px; font-weight: bold; margin-bottom: 5px; display: block; opacity: 0.8; }
        .bot-tag { color: #00e5ff; }
        .user-tag { color: #fff; text-align: right; }

        .input-area {
            padding: 15px;
            background-color: #080808;
            border-top: 1px solid #1a1a1a;
            display: flex;
            align-items: center;
            flex-shrink: 0;
            padding-bottom: calc(15px + env(safe-area-inset-bottom));
        }

        #user-input {
            flex: 1;
            background-color: #151515;
            border: 1px solid #333;
            padding: 12px 20px;
            border-radius: 25px;
            color: #fff;
            outline: none;
            font-size: 16px;
        }

        #send-btn {
            background: none; border: none;
            color: #00e5ff; font-size: 28px;
            margin-left: 10px; cursor: pointer;
        }
    </style>
</head>
<body>

<div class="app-wrapper">
    <div class="header">YÄ±ldÄ±zAY</div>
    <div id="chat-container"></div>
    <div class="input-area">
        <input type="text" id="user-input" placeholder="YÄ±ldÄ±zAY ile konuÅŸ..." autocomplete="off">
        <button id="send-btn">â¤</button>
    </div>
</div>

<script>
    // Mobil YÃ¼kseklik Fix
    const doc = document.documentElement;
    const updateHeight = () => { doc.style.setProperty('--app-height', `${window.innerHeight}px`); };
    window.addEventListener('resize', updateHeight);
    updateHeight();

    const chatContainer = document.getElementById('chat-container');
    const userInput = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');

    // Sohbet VeritabanÄ±
    const cevaplar = {
        "merhaba": "Merhaba! Seninle tekrar konuÅŸmak Ã§ok gÃ¼zel. BugÃ¼n neler yapalÄ±m? ğŸ˜Š",
        "nasÄ±lsÄ±n": "Ã‡ok iyiyim, senin enerjin bana da bulaÅŸtÄ±! Sen nasÄ±lsÄ±n? ğŸš€",
        "iyiyim": "Harika! Keyfinin yerinde olmasÄ±na Ã§ok sevindim. Sohbetimize devam edelim mi? âœ¨",
        "teÅŸekkÃ¼r": "Rica ederim, her zaman yanÄ±ndayÄ±m! BaÅŸka bir isteÄŸin var mÄ±? ğŸ™Œ",
        "adÄ±n ne": "Benim adÄ±m YÄ±ldÄ±zAY. Senin iÃ§in buradayÄ±m! ğŸ¤–",
        "neler yapabilirsin": "Seninle sohbet edebilir, dertleÅŸebilir ve matematik iÅŸlemlerini Ã§Ã¶zebilirim. ğŸŒŒ",
        "kimsin": "Ben YÄ±ldÄ±zAY, SONSUZ.AY ekosistemi iÃ§in geliÅŸtirilen akÄ±llÄ± bir asistanÄ±m. âœ¨"
    };

    function botEkle(metin) {
        const div = document.createElement('div');
        div.className = 'message bot-msg';
        div.innerHTML = `<span class="name-tag bot-tag">YÄ±ldÄ±zAY</span>${metin}`;
        chatContainer.appendChild(div);
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function matematikKontrol(text) {
        // Sadece rakam ve iÅŸlem iÅŸareti iÃ§eren mesajlarÄ± kontrol et
        if (/[0-9]/.test(text) && /[+\-*/]/.test(text)) {
            try {
                let islem = text.replace(/[^0-9+\-*/().]/g, '');
                let sonuc = eval(islem);
                if (sonuc !== undefined && !isNaN(sonuc)) {
                    return `Hemen hesapladÄ±m: ${islem} = **${sonuc}** ğŸ”¢`;
                }
            } catch (e) { return null; }
        }
        return null;
    }

    function gonder() {
        const text = userInput.value.trim();
        if (!text) return;

        // KullanÄ±cÄ± MesajÄ±
        const uDiv = document.createElement('div');
        uDiv.className = 'message user-msg';
        uDiv.innerHTML = `<span class="name-tag user-tag">Siz</span>${text}`;
        chatContainer.appendChild(uDiv);
        userInput.value = "";
        chatContainer.scrollTop = chatContainer.scrollHeight;

        // Bot MantÄ±ÄŸÄ±
        setTimeout(() => {
            let kucuk = text.toLowerCase();
            let yanit = "Bunu henÃ¼z Ã¶ÄŸrenemedim ama kendimi geliÅŸtirmeye devam ediyorum! ğŸ› ï¸";

            // 1. Ã–nce Sohbet KontrolÃ¼ (Hata buradaydÄ±, artÄ±k Ã¶nce sohbete bakÄ±yor)
            let bulundu = false;
            for (let anahtar in cevaplar) {
                if (kucuk.includes(anahtar)) {
                    yanit = cevaplar[anahtar];
                    bulundu = true;
                    break;
                }
            }

            // 2. EÄŸer sohbet anahtarÄ± yoksa Matematik KontrolÃ¼
            if (!bulundu) {
                const mat = matematikKontrol(text);
                if (mat) yanit = mat;
            }

            botEkle(yanit);
        }, 600);
    }

    sendBtn.addEventListener('click', gonder);
    userInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') gonder(); });
    window.onload = () => botEkle("Merhaba! Ben YÄ±ldÄ±zAY. BugÃ¼n sana nasÄ±l yardÄ±mcÄ± olabilirim? âœ¨");
</script>

</body>
</html>
